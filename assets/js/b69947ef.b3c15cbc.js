"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[303],{6010:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"corpus-ingestion","title":"Corpus Ingestion","description":"After completing the installation, you need to ingest a corpus of tables to build the semantic join database. The corpus provides the statistical foundation for semantic joins.","source":"@site/docs/corpus-ingestion.md","sourceDirName":".","slug":"/corpus-ingestion","permalink":"/sema-join-docs/docs/corpus-ingestion","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Environment Setup","permalink":"/sema-join-docs/docs/environment-setup"},"next":{"title":"Using Project SEMA-JOIN","permalink":"/sema-join-docs/docs/using-sema-join"}}');var i=n(4848),a=n(8453);const o={sidebar_position:4},r="Corpus Ingestion",c={},l=[{value:"What is a Corpus?",id:"what-is-a-corpus",level:2},{value:"Corpus Data",id:"corpus-data",level:2},{value:"Ingestion Process",id:"ingestion-process",level:2},{value:"Step 1: Ingest Corpus Tables",id:"step-1-ingest-corpus-tables",level:3},{value:"Step 2: Calculate Statistics",id:"step-2-calculate-statistics",level:3},{value:"Running Ingestion",id:"running-ingestion",level:2},{value:"Database Location",id:"database-location",level:2},{value:"Ingestion Time",id:"ingestion-time",level:2},{value:"Verifying Ingestion",id:"verifying-ingestion",level:2},{value:"Alternative Commands (Without sema-join.sh)",id:"alternative-commands-without-sema-joinsh",level:2},{value:"Re-running Ingestion",id:"re-running-ingestion",level:2},{value:"Custom Corpus",id:"custom-corpus",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"corpus-ingestion",children:"Corpus Ingestion"})}),"\n",(0,i.jsx)(s.p,{children:"After completing the installation, you need to ingest a corpus of tables to build the semantic join database. The corpus provides the statistical foundation for semantic joins."}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Prerequisites:"})," You must complete the ",(0,i.jsx)(s.a,{href:"./installation",children:"Installation"})," step before running corpus ingestion."]}),"\n",(0,i.jsx)(s.h2,{id:"what-is-a-corpus",children:"What is a Corpus?"}),"\n",(0,i.jsx)(s.p,{children:"A corpus is a collection of tables from your data domain that serves as the statistical foundation for semantic joins. Project SEMA-JOIN analyzes this corpus to discover which values co-occur frequently across tables."}),"\n",(0,i.jsx)(s.p,{children:'The key insight from the Microsoft Research SEMA-JOIN paper is that values appearing together in the same table often have semantic relationships. For example, if "California" and "Los Angeles" frequently appear in the same rows across many tables, they likely have a geographic relationship.'}),"\n",(0,i.jsx)(s.p,{children:"By calculating Pointwise Mutual Information (PMI) scores across the corpus, Project SEMA-JOIN quantifies the strength of these relationships. These pre-computed PMI scores are then used during the join phase to match rows based on semantic similarity rather than exact matches."}),"\n",(0,i.jsx)(s.h2,{id:"corpus-data",children:"Corpus Data"}),"\n",(0,i.jsx)(s.p,{children:"Project SEMA-JOIN includes sample corpus data in JSON format. This data contains tables that will be analyzed to build the semantic index.\nCurrently supported corpus formats are:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"JSON files containing arrays of tables in Wikitable or WDC format"}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"ingestion-process",children:"Ingestion Process"}),"\n",(0,i.jsx)(s.p,{children:"The ingestion process consists of two main steps:"}),"\n",(0,i.jsx)(s.h3,{id:"step-1-ingest-corpus-tables",children:"Step 1: Ingest Corpus Tables"}),"\n",(0,i.jsx)(s.p,{children:"The first step reads the corpus JSON files and stores table metadata and cell values in the database. This creates the foundation for semantic analysis."}),"\n",(0,i.jsx)(s.h3,{id:"step-2-calculate-statistics",children:"Step 2: Calculate Statistics"}),"\n",(0,i.jsx)(s.p,{children:"The second step calculates Pointwise Mutual Information (PMI) scores for value pairs based on their co-occurrence patterns."}),"\n",(0,i.jsx)(s.p,{children:"PMI measures how much more likely two values are to appear together than would be expected by chance. High PMI scores indicate strong semantic relationships. The system also computes value frequencies and co-occurrence counts to support the join algorithms."}),"\n",(0,i.jsx)(s.p,{children:"This statistical analysis is the core of Project SEMA-JOIN's ability to understand semantic relationships without manual rule definition."}),"\n",(0,i.jsx)(s.h2,{id:"running-ingestion",children:"Running Ingestion"}),"\n",(0,i.jsx)(s.p,{children:"Use the management script to run the complete database setup process:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"./sema-join.sh db\n"})}),"\n",(0,i.jsx)(s.p,{children:"This will execute both ingestion steps in sequence:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Read all corpus files"}),"\n",(0,i.jsx)(s.li,{children:"Extract and normalize table values"}),"\n",(0,i.jsx)(s.li,{children:"Calculate value frequencies"}),"\n",(0,i.jsx)(s.li,{children:"Compute co-occurrence statistics"}),"\n",(0,i.jsx)(s.li,{children:"Generate NPMI scores"}),"\n",(0,i.jsx)(s.li,{children:"Create database indexes"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Use the ",(0,i.jsx)(s.code,{children:"--large"})," flag if you are using a large corpus:\nThis will use temporary files to handle larger datasets without running out of memory as well ase optimizing some steps for speed."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash./sema-join.sh",metastring:"db --large"})}),"\n",(0,i.jsx)(s.h2,{id:"database-location",children:"Database Location"}),"\n",(0,i.jsx)(s.p,{children:"The corpus database is created in the project root directory. This database contains all the statistical information needed for semantic joins."}),"\n",(0,i.jsx)(s.h2,{id:"ingestion-time",children:"Ingestion Time"}),"\n",(0,i.jsx)(s.p,{children:"Ingestion time depends on corpus size:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Small corpus: 1-5 minutes"}),"\n",(0,i.jsx)(s.li,{children:"Large corpus: 10-30 minutes"}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"verifying-ingestion",children:"Verifying Ingestion"}),"\n",(0,i.jsx)(s.p,{children:"After ingestion completes, verify the database was created successfully:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ls -lh corpus.db\n"})}),"\n",(0,i.jsx)(s.p,{children:"You should see a database file with size information indicating successful creation."}),"\n",(0,i.jsx)(s.h2,{id:"alternative-commands-without-sema-joinsh",children:"Alternative Commands (Without sema-join.sh)"}),"\n",(0,i.jsx)(s.p,{children:"If you prefer not to use the management script, run the ingestion scripts directly."}),"\n",(0,i.jsxs)(s.p,{children:["Note: These commands require that you've already completed the installation step, which created the ",(0,i.jsx)(s.code,{children:".venv"})," directory."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Activate virtual environment (created during installation)\nsource .venv/bin/activate\n\n# Step 1: Ingest corpus data\npython backend/corpus/setup_db/01_ingest_corpus.py\n\n# Step 2: Calculate PMI statistics\npython backend/corpus/setup_db/02_calculate_stats.py\n"})}),"\n",(0,i.jsx)(s.h2,{id:"re-running-ingestion",children:"Re-running Ingestion"}),"\n",(0,i.jsx)(s.p,{children:"If you need to re-ingest the corpus, first remove the existing database:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"rm corpus.db\n"})}),"\n",(0,i.jsx)(s.p,{children:"Then run the ingestion process again:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"./sema-join.sh db\n"})}),"\n",(0,i.jsx)(s.p,{children:"Or using direct commands:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"source .venv/bin/activate\npython backend/corpus/setup_db/01_ingest_corpus.py\npython backend/corpus/setup_db/02_calculate_stats.py\n"})}),"\n",(0,i.jsx)(s.p,{children:"This is useful when updating the corpus with new tables or correcting data issues."}),"\n",(0,i.jsx)(s.h2,{id:"custom-corpus",children:"Custom Corpus"}),"\n",(0,i.jsx)(s.p,{children:"To use your own corpus data, place JSON files in the corpus data directory. Each file should contain tables in the expected format."}),"\n",(0,i.jsx)(s.p,{children:"The quality of semantic joins depends heavily on corpus coverage. Your corpus should contain representative tables from your data domain. The more tables with relevant value co-occurrences, the better Project SEMA-JOIN can discover semantic relationships."}),"\n",(0,i.jsx)(s.p,{children:"For example, if you are joining geographic data, your corpus should contain tables with geographic entities. If you are joining product data, include tables with product names, manufacturers, and categories."}),"\n",(0,i.jsx)(s.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(s.p,{children:"With corpus ingestion complete, you are ready to start using Project SEMA-JOIN."})]})}function u(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>r});var t=n(6540);const i={},a=t.createContext(i);function o(e){const s=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(a.Provider,{value:s},e.children)}}}]);